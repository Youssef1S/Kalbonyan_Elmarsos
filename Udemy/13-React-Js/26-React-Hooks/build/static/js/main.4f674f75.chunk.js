(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(25)},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),o=(n(17),n(3)),i=n(1),u=n(7),s=(n(18),function(e){return r.a.createElement("div",{className:"card"},e.children)}),d=(n(19),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),m=(n(20),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),m=u[0],E=u[1];console.log("RENDERING INGREDIENT FORM");return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(s,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onAddIngredient({title:l,amount:m}),c(""),E("")}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:l,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:m,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading&&r.a.createElement(d,null)))))})),E=(n(21),function(e){return console.log("RENDERING INGREDIENTLIST"),r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map(function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(void 0,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))})))}),f=(n(22),r.a.memo(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))})),b={loading:!1,error:null,data:null,extra:null,identifier:null},g=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null,data:null,extra:null,identifier:t.identifier};case"RESPONSE":return Object(o.a)(Object(o.a)({},e),{},{loading:!1,data:t.responseData,extra:t.extra});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return b;default:throw new Error("Should not be reached!")}},p=function(){var e=Object(a.useReducer)(g,b),t=Object(i.a)(e,2),n=t[0],r=t[1],l=Object(a.useCallback)(function(){return r({type:"CLEAR"})},[]),c=Object(a.useCallback)(function(e,t,n,a,l){r({type:"SEND",identifier:l}),fetch(e,{method:t,body:n,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){r({type:"RESPONSE",responseData:e,extra:a})}).catch(function(e){r({type:"ERROR",errorMessage:"Something went wrong!"})})},[]);return{isLoading:n.loading,data:n.data,error:n.error,sendRequest:c,reqExtra:n.extra,reqIdentifer:n.identifier,clear:l}},h=(n(23),r.a.memo(function(e){var t=e.onLoadIngredients,n=Object(a.useState)(""),l=Object(i.a)(n,2),c=l[0],o=l[1],u=Object(a.useRef)(),d=p(),m=d.isLoading,E=d.data,b=d.error,g=d.sendRequest,h=d.clear;return Object(a.useEffect)(function(){var e=setTimeout(function(){if(c===u.current.value){var e=0===c.length?"":'?orderBy="title"&equalTo="'.concat(c,'"');g("https://react-hooks-update-e8d73-default-rtdb.firebaseio.com/ingredients.json"+e,"GET")}},500);return function(){clearTimeout(e)}},[c,u,g]),Object(a.useEffect)(function(){if(!m&&!b&&E){var e=[];for(var n in E)e.push({id:n,title:E[n].title,amount:E[n].amount});t(e)}},[E,m,b,t]),r.a.createElement("section",{className:"search"},b&&r.a.createElement(f,{onClose:h},b),r.a.createElement(s,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),m&&r.a.createElement("span",null,"Loading..."),r.a.createElement("input",{ref:u,type:"text",value:c,onChange:function(e){return o(e.target.value)}}))))})),v=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(u.a)(e),[t.ingredient]);case"DELETE":return e.filter(function(e){return e.id!==t.id});default:throw new Error("Should not get there!")}},O=function(){var e=Object(a.useReducer)(v,[]),t=Object(i.a)(e,2),n=t[0],l=t[1],c=p(),u=c.isLoading,s=c.error,d=c.data,b=c.sendRequest,g=c.reqExtra,O=c.reqIdentifer,N=c.clear;Object(a.useEffect)(function(){u||s||"REMOVE_INGREDIENT"!==O?u||s||"ADD_INGREDIENT"!==O||l({type:"ADD",ingredient:Object(o.a)({id:d.name},g)}):l({type:"DELETE",id:g})},[d,g,O,u,s]);var j=Object(a.useCallback)(function(e){l({type:"SET",ingredients:e})},[]),R=Object(a.useCallback)(function(e){b("https://react-hooks-update-e8d73-default-rtdb.firebaseio.com/ingredients.json","POST",JSON.stringify(e),e,"ADD_INGREDIENT")},[b]),I=Object(a.useCallback)(function(e){b("https://react-hooks-update-e8d73-default-rtdb.firebaseio.com/ingredients/".concat(e,".json"),"DELETE",null,e,"REMOVE_INGREDIENT")},[b]),D=Object(a.useMemo)(function(){return r.a.createElement(E,{ingredients:n,onRemoveItem:I})},[n,I]);return r.a.createElement("div",{className:"App"},s&&r.a.createElement(f,{onClose:N},s),r.a.createElement(m,{onAddIngredient:R,loading:u}),r.a.createElement("section",null,r.a.createElement(h,{onLoadIngredients:j}),D))},N=r.a.createContext({isAuth:!1,login:function(){}}),j=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),l=n[0],c=n[1];return r.a.createElement(N.Provider,{value:{login:function(){c(!0)},isAuth:l}},e.children)},R=(n(24),function(e){var t=Object(a.useContext)(N);return r.a.createElement("div",{className:"auth"},r.a.createElement(s,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){t.login()}},"Log In")))}),I=function(e){var t=Object(a.useContext)(N),n=r.a.createElement(R,null);return t.isAuth&&(n=r.a.createElement(O,null)),n};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(j,null,r.a.createElement(I,null)))}],[[8,1,2]]]);
//# sourceMappingURL=main.4f674f75.chunk.js.map